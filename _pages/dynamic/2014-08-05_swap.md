---
layout: post
jdate: '1393-05-14'
user: misam
title: ایجاد فضای swap
categories:
- آموزشی
tags:
- پیکربندی
featured: swap.jpg
keywords:
- فضای swap
- swap لینوکس
description: آموزش ایجاد فضای swap
timeToRead: 5
---

سواپ (swap) راه‌کاری در سیستم‌های لینوکس است تا میزان رم کم سیستم جبران شود. در این روش فضایی از هارد دیسک به عنوان سواپ در نظر گرفته می‌شود تا در صورت نیاز به حافظه بیشتر از رم اصلی سیستم، اطلاعات (صفحات حافظه) در این بخش ذخیره و بازیابی شوند.

شما می‌توانید فضای سواپ را یک پارتیشن مخصوص یا یک فایل در نظر بگیرید. با اینکه اکثرا از پارتیشن مخصوص برای این فضا استفاده می‌کنند اما گفته می‌شود فایل سواپ نیز از عهده این کار به خوبی بر می‌آید.

ست کردن سواپ روی فایل مزیت‌های خاص خودش را دارد؛ مانند اینکه راحت می‌توان آن را کم، زیاد و یا حذف کرد! و درگیری با پارتیشن‌های هارد نخواهیم داشت.

در اکثر منابع روش ساخت یک پارتیشن سواپ و ست کردن آن گفته شده است اما کمتر روش ساخت آن با فایل گفته شده است.

خب ما در این آموزش هر دو روش را با هم می‌گوییم!

* تمام دستورات زیر به دسترسی روت نیاز دارند که یا باید با su وارد روت شوید یا از sudo قبل دستورات استفاده کنید.

**مرحله ۱ - ساخت بخشی برای سواپ**

اگر از یک پارتیشن برای سواپ می‌خواهید استفاده کنید در این مرحله با هر برنامه‌ای که می‌توانید این پارتیشن را ایجاد کنید.

اگر می‌خواهید از فایل برای سواپ استفاده کنید دستور زیر را وارد کنید.

```sh
dd if=/dev/zero of=/swapfile bs=1024 count=524288
```

در دستور بالا بعد از of مسیر فایل مورد نظرتان که سواپ روی آن ست می‌شود را می‌نویسیم که من در اینجا فایلی در شاخه اصلی با نام swapfile انتخاب کرده‌ام. جلوی count نیز حجم مورد نیاز برای این فضا را بر حسب کیلوبایت می‌نویسیم که من ۵۱۲ مگابایت (۵۱۲ × ۱۰۲۴) در نظر گرفته‌ام.

* معمولا مقدار فضای سواپ برای سیستم‌هایی با رم کمتر از ۱ گیگابایت، دو برابر ظرفیت رم و برای بالاتر از آن ۲ گیگابایت پیشنهاد می‌شود.

**مرحله ۲ - فرمت کردن بخش سواپ با فرمت سواپ**

اگر از یک پارتیشن استفاده می‌کنید (بجای sdX باید شناسه پارتیشن مورد نظر خودتون رو بنویسید)

```sh
mkswap /dev/sdX
```

و اگر از فایل استفاده می‌کنید (بعد از mkswap آدرس فایل رو بنویسید)

```sh
mkswap /swapfile
```

**مرحله ۳ - ست کردن سواپ**

اگر از یک پارتیشن استفاده می‌کنید (بجای sdX باید شناسه پارتیشن مورد نظر خودتون رو بنویسید)

```sh
swapon /dev/sdX
```

و اگر از فایل استفاده می‌کنید (بعد از mkswap آدرس فایل رو بنویسید)

```sh
swapon /swapfile
```

* یادتون باشه که اگه بعدا خواستید این سواپ رو از سیستم بگیرید از دستور swapoff باید استفاده کنید.

**مرحله ۴ - فعال کردن فضای سواپ در هنگام بوت شدن**

اگر از یک پارتیشن استفاده می‌کنید (بجای sdX باید شناسه پارتیشن مورد نظر خودتون رو بنویسید)

```sh
/dev/sdX swap swap defaults 0 0
```

و اگر از فایل استفاده می‌کنید (بعد از mkswap آدرس فایل رو بنویسید)

```sh
/swapfile swap swap defaults 0 0
```

خب تموم شد! برای دیدن فضاهای سواپ سیستم هم می‌تونید از دستور زیر استفاده کنید

```sh
cat /proc/swaps
```