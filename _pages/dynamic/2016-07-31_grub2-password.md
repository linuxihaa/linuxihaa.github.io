---
layout: post            
jdate: '1395-05-10'      
user: rmasoumvand            
title: گذاشتن رمز روی grub2 
categories:
- آموزشی
tags:
- حریم‌شخصی
- پیکربندی
featured: grub2-password.jpg            
keywords:
- رمز روی grub2
- grub2 password
description: آموزش گذاشتن رمز روی grub2
timeToRead: 5
---

در مطلب «[بازیابی رمز روت لینوکس](http://linuxihaa.ir/%D8%A8%D8%A7%D8%B2%DB%8C%D8%A7%D8%A8%DB%8C-%D8%B1%D9%85%D8%B2-%D8%B1%D9%88%D8%AA-%D9%84%DB%8C%D9%86%D9%88%DA%A9%D8%B3/)» نحوه بازیابی کلمه عبور کاربر ریشه را از طریق تغییر دادن پارامترهای بوت کرنل در گراب توضیح دادیم. برای امنیت بیشتر می‌توانیم آیتم‌های grub2 را توسط رمز عبور محافظت کنیم. در این آموزش به نحوه رمزگذاری دسترسی برای گزینه‌های grub2 خواهیم پرداخت.

ابتدا توسط یک ویرایشگر متنی فایل `etc/grub.d/40_custom/` را ویرایش می‌کنیم.

```sh  
sudo gedit /etc/grub.d/40_custom  
```

سپس خطوط زیر را به انتهای آن اضافه می‌کنیم.

```  
set superusers=”USER”  
password USER PASSWORD  
```

که در اینجا منظور از `USER‍‍‍‍` نام کاربری و `PASSWORD` رمز عبور انتخابی شما است. از آنجایی که در روش فوق رمز عبور کاربر بصورت Clear Text ذخیره می‌شود برای امنیت بیشتر می‌توانیم رمز عبور را رمزگذاری کنیم.

برای این کار به‌صورت زیر عمل می‌کنیم.

ابتدا می‌بایست توسط دستور زیر یک کلمه عبور رمزگذاری شده ایجاد کنیم.

```sh  
grub-mkpasswd-pbkdf2  
```

پس از اجرای دستور فوق از شما رمز عبور مورد نظرتان برای رمزگذاری پرسیده می‌شود و درنهایت نسخه رمزگذاری شده کلمه عبور شما را نمایش می‌دهد.

سپس مجدداً فایل `etc/grub.d/40_custom/` را ویرایش نموده و این بار به‌جای کلمه عبور Clear Text کلمه عبور رمزگذاری شده را به‌صورت زیر وارد نمایید.

```  
password USER grub.pbkdf2 ENCRYPTED PASSWORD  
```

که در اینجا منظور از `ENCRYPTED PASSWORD` کلمه عبور رمزگذاری تولید شده است.

سپس فایل `etc/grub.d/10_linux/` را با یک ویرایشگر متنی ویرایش می‌کنیم.

```sh  
sudo gedit /etc/grub.d/10_linux  
```

و عبارت `unrestricted--` را انتهای خط زیر اضافه می‌کنیم.

``` 
CLASS="--class gnu-linux --class gnu --class os --unrestricted"  
```

سپس برای اعمال تغییرات دستور زیر را وارد می‌کنیم.

```sh  
update-grub  
```
