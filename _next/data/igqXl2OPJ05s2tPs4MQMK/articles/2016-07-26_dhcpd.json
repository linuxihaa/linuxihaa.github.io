{"pageProps":{"page":{"slug":"2016-07-26_dhcpd","layout":"post","jdate":"Tue Jul 26 2016 00:00:00 GMT+0000","user":"rmasoumvand","title":"راه اندازی DHCP Server در لینوکس","categories":["آموزشی"],"tags":["شبکه","سرور"],"featured":"dhcpd-linux.jpg","keywords":["dhcp","linux dhcp server","dhcp لینوکس"],"description":"آموزش راه اندازی DHCP Server در لینوکس","timeToRead":5,"content":"\nهمان‌طور که می‌دانید، دو کامپیوتر در شبکه برای برقرای ارتباط با یکدیگر نیاز به یک IP آدرس یونیک و   مختص به خود را دارند. به‌طور کلی برای یک هاست در شبکه دو راه برای بدست آوردن این آدرس وجود دارد:\n\n1.  تنظیم به‌صورت دستی: که در این روش می‌بایست روی تمامی سیستم‌ها اطلاعات مربوط به IP به‌صورت دستی وارد شود.\n2.  دریافت به‌صورت اتوماتیک: با استفاده از پروتکل DHCP که در آن یک سیستم شبکه درخواست دریافت تنظیمات مربوطه به IP را اعلام می‌کند و این درخواست توسط یک سرویس دهنده DHCP در شبکه پاسخ داده می‌شود.\n\nتوسط پروتکل DHCP شما قادر خواهید بود موارد زیر را روی سیستم‌های شبکه خود به‌صورت خودکار تنظیم نمایید.\n\n*   آدرس IP و Subnet  \n*   آدرس سرویس دهنده دامنه (DNS)  \n*   آدرس دروازه شبکه (Gateway)  \n*   آدرس Wins Server (برای کلاینت های مایکروسافتی)  \n*   و ..\n\nدر این آموزش به نحوه نصب و راه اندازی سرویس DHCP در لینوکس خواهیم پرداخت.\n\nبرای نصب سرویس دهنده DHCP به‌صورت زیر عمل می کنیم.\n\nبرای سیستم‌های مبتنی دبیان:\n\n```sh  \napt-get install dhcp3-server  \n```\n\nبرای سیستم‌های مبتنی بر ردهت:\n\n```sh  \nyum install dhcp  \n```\n\nبه‌صورت پیش‌فرض پیکربندی سرویس دهنده DHCP فاقد تنظیمات لازم برای ارایه سرویس به شبکه هست که می‌بایست با ویرایش فایل `etc/dhcp/dhcpd.conf/` این سرویس را پیکربندی نمود.\n\nبرای تعریف یک Subnet جهت ارایه سرویس در آن می‌بایست مانند مثال زیر تعاریف مربوط را به فایل `dhcpd.conf ` اضافه نمود.\n\nبرای مثال:\n\n```\nsubnet 10.1.1.0 netmask 255.255.255.0 {    \n  range 10.1.1.3 10.1.1.254;    \n}  \n```\n\nکه در اینجا ما یک subnet با آدرس شبکه `10.10.10.0` و mask با آدرس `255.255.255.0` تعریف نموده‌ایم. همچنین توسط عبارت range می‌توانیم رنج آدرس‌های IP قابل تخصیص توسط سرویس دهنده را مشخص نمایید که در مثال بالا از آدرس `10.1.1.3` الی `10.1.1.254` قابل ارایه در این subnet است.\n\nتا اینجا سرویس‌دهنده‌ی ما برای ارائه آدرس IP پیکربندی شده است. ولی سیستم‌های شبکه علاوه بر آدرس IP نیاز به تنظیمات دیگری نظیر آدرس سرویس دهنده DNS و همچنین آدرس Gateway شبکه دارند که برای اضافه نمودن آن‌ها بصورت زیر عمل می‌کنیم.\n\n```\nsubnet 10.1.1.0 netmask 255.255.255.0 {    \n  range 10.1.1.3 10.1.1.254;    \n  option domain-name-servers 10.1.1.1, 8.8.8.8;    \n  option routers 10.1.1.1;    \n}    \n```\n\nکه در اینجا عبارت `option domain-name-servers`  آدرس سرویس دهنده DNS را مشخص می‌کند و  عبارت `option routers` آدرس Gateway شبکه را مشخص می‌کند.\n\n*‌نکته)‌ آدرس‌های ارائه شده توسط سرویس دهنده به‌صورت leased  می‌باشد و پس از اتمام مدت زمان پیشفرض یا تعریف شده در سرویس دهنده، آن آدرس از سرویس گیرنده گرفته می‌شود و همچنین به‌دلیل ماهیت dynamic پروتکل ممکن است آدرسی که زمانی به هاست شما تخصیص داده شده به هاست دیگری در شبکه تخصیص داده شود.\n\nبرای تغییر مدت زمان پیشفرض اجاره (lease) می‌توانیم بصورت زیر عمل کنیم.\n\n```\ndefault-lease-time 600;    \nmax-lease-time 7200;\n\nsubnet 10.1.1.0 netmask 255.255.255.0 {    \n  range 10.1.1.3 10.1.1.254;    \n}  \n```\n\nکه در اینجا مقدار مقابل عبارت `default-lease-time` مدت زمان اجاره پیش‌فرض تنظیمات و `max-lease-time` حداکثر زمان اجاره بر حسب ثانیه را مشخص می‌کند.\n\n شاید شما بخواهید که برای یک هاست خاص در شبکه (برای مثال: پرینتر شبکه ) آدرس IP را رزرو کنید تا همیشه آن آدرس برای هاست مورد نظرتان تخصیص داده شود.\n\n```\nhost printer {    \n  hardware ethernet 00:16:d3:b7:8f:86;    \n  fixed-address 10.1.1.100;    \n}  \n```\n\nکه در اینجا  عبارت host نام هاست مورد نظر را مشخص می کند. عبارت `hardware ethernet` آدرس لایه ۲ یا همان mac Address هاست شما را مشخص می‌کند و در نهایت `fixed-address` آدرسی است که می‌خواهید برای آن هاست رزرو بشود را مشخص می‌کنیم.\n\n در پایان سرویس دهنده DHCP را یکبار restart می‌کنیم.\n\n```sh  \n/etc/init.d/isc-dhcp-server restart  \n```\n"}},"__N_SSG":true}