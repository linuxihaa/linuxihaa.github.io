{"pageProps":{"page":{"slug":"2016-08-04_linux-setup-dns-server","layout":"post","jdate":"Thu Aug 04 2016 00:00:00 GMT+0000","user":"rmasoumvand","title":"راه اندازی DNS Server لینوکس","categories":["آموزشی"],"tags":["شبکه","سرور"],"featured":"dns-server-linux.jpg","keywords":["dns server لینوکس","bind9"],"description":"آموزش راه اندازی DNS Server لینوکس","timeToRead":5,"content":"\nهمان‌طور که می‌دانید زمانی که می‌خواهید وارد وبسایتی شوید برای مراجعه می‌بایست آدرس سرویس‌دهنده آن وب سایت را بدانید که با آدرس آی‌پی (IP Address) مشخص می‌شود. از آنجایی که به‌خاطر سپردن آدرس‌های IP برای تمامی وب‌سایت‌ها کاری دشوار و تقریباً غیر ممکن است می‌توانیم به‌جای وارد نمودن آدرس IP از سرویس نام دامنه یا همان DNS استفاده کنیم. توسط این سرویس نام‌های دامنه به آدرس‌های آی‌پی ترجمه می‌شوند.\n\nدر این آموزش به نحوه نصب و راه اندازی سرویس دهنده معروف `bind` در لینوکس خواهیم پرداخت.\n\nابتدا توسط دستور زیر سرویس دهنده bind را نصب می‌کنیم.\n\n- برای سیستم‌های مبتنی بر دبیان:\n\n```sh  \nsudo apt install bind9  \n```\n\n- برای سیستم‌های مبتنی بر ردهت:\n\n```sh  \nsudo yum install bind  \n```\n\nسپس برای تعریف یک `zone`، می‌بایست فایل زیر را ویرایش کنیم.\n\n```sh  \nsudo nano /etc/bind/named.conf.local  \n```\n\nو خطوط زیر را به آن اضافه می‌کنیم.\n\n```  \nzone “linuxihaa.ir” {  \n    type master;  \n    file “/etc/bind/db.linuxihaa.ir”;  \n};  \n```\n\nکه در اینجا نام دامنه ما `linuxihaa.ir` و از نوع `master` است.\n\nسپس می‌بایست یک zone فایل برای دامنه مورد نظرمان ایجاد کنیم. برای این کار به‌صورت زیر عمل می‌کنیم.\n\n```sh  \ncd /etc/bind  \ncp db.empty db.linuxihaa.ir  \n```\n\nو فایل ایجاد شده را توسط یک ویرایشگر متنی ویرایش می‌کنیم.\n\n```sh  \nsudo nano /etc/bind/db.linuxiha.ir  \n```\n\nکه در ابتدا محتویات فایل فوق بصورت زیر خواهد بود.\n\n```  \n$TTL 86400\n\n@ IN SOA localhost. root.localhost. (  \n    1 ; Serial  \n    604800 ; Refresh  \n    86400 ; Retry  \n    2419200 ; Expire  \n    86400 ) ; Negative Cache TTL  \n;  \n@ IN NS localhost.  \n```\n\nکه می‌بایست به‌جای `localhost` نام دامنه مورد نظرمان را اضافه کنیم.\n\n```  \n$TTL 86400\n\n@ IN SOA linuxihaa.ir. admin.linuxihaa.ir. (  \n    1 ; Serial  \n    604800 ; Refresh  \n    86400 ; Retry  \n    2419200 ; Expire  \n    86400 ) ; Negative Cache TTL  \n;\n\n@ IN NS linuxihaa.ir.  \n```\n\nکه در اینجا `linuxihaa.ir.` نام دامنه مورد نظر ما و `admin.linuxihaa.ir.` آدرس ایمیل مدیر سیستم است.\n\nپس از اعمال تغییرات فوق می‌بایست رکوردهای مربوط به هاست‌های مورد نظرمان را به انتهای فایل، به‌صورت زیر اضافه کنیم.\n\n```  \nns IN A 104.28.12.99\n\nlinuxihaa.ir. A 104.28.12.99  \nwww CNAME linuxihaa.ir.  \nhost1 A 104.28.12.199  \nhost2 A 104.28.12.200  \n```\n\nکه در مثال فوق در خط چهارم آدرس یک وب سرور را مشخص نمودیم که در‌واقع یک نام مستعار به آدرس `linuxihaa.ir` است.\n\nهمچنین در خطوط پنجم و ششم دو هاست به آدرس‌های `host1.linuxihaa.ir` و `host2.linuxihaa.ir` تعریف نمودیم.\n\nپس از ویرایش و ذخیره فایل فوق می‌بایست صحت اطلاعات وارد شده را توسط ابزار `named-checkzone` به‌صورت زیر بررسی کنیم.\n\n```sh  \nnamed-checkzone linuxihaa.ir /etc/bind/db.linuxihaa.ir  \n```\n\nپس از اجرای دستور فوق و در صورت نداشتن مشکل برنامه خروجی زیر را نمایش خواهد داد.\n\n```sh  \nzone linuxihaa.ir/IN: loaded serial 1  \nOK  \n```\n\nسپس جهت راه اندازی مجدد bind دستور زیر را وارد می‌کنیم.\n\n```sh  \nsudo systemctl restart bind9  \n```\n\nجهت تست سرویس دهنده می‌توانیم از دستور `dig` به‌صورت زیر استفاده کنیم.\n\n```sh  \ndig @104.28.12.99 [www.linuxihaa.ir](http://www.linuxihaa.ir/)  \n```\n\n*   نکته: برای استفاده از دستور dig می بایست بسته `dnsutils` را نصب کنید.\n"}},"__N_SSG":true}