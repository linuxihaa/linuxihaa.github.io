{"pageProps":{"page":{"slug":"2016-07-28_samba","layout":"post","jdate":"Thu Jul 28 2016 00:00:00 GMT+0000","user":"rmasoumvand","title":"راه اندازی سرویس Samba در لینوکس","categories":["آموزشی"],"tags":["شبکه","پیکربندی"],"featured":"samba-server-linux.jpg","keywords":["samba","samba لینوکس","samba server","samba server لینوکس"],"description":"آموزش راه اندازی سرویس Samba در لینوکس","timeToRead":5,"content":"\nSamba یک ابزار بسیار قدرتمند است که به وسیله آن می‌توان سرویس‌های اشتراک فایل و پرینتر را برای کلاینت‌های مایکروسافتی ارائه نمود. علاوه بر این می‌توان از آن به عنوان یک دامین کنترلر در شبکه‌های مبتنی بر Windows Server Domain استفاده نمود. همچنین از نسخه چهارم این نرم‌افزار به بعد امکان پشتیبانی از Active Directory و دامین‌های Windows NT فراهم شده است.\n\nدر این آموزش به نحوه نصب و راه اندازی این سرویس و همچنین اشتراک گذاری منابع توسط سرویس Samba برای کلاینت‌های مایکروسافتی و لینوکسی خواهیم پرداخت.\n\nبرای نصب سرویس دهنده Samba دستور زیر را وارد می‌کنیم.\n\n```sh  \nsudo apt install samba  \n```\n\nسپس برای اعمال تنظیمات می‌بایست فایل `etc/samba/smb.conf/` را با یک ویرایش‌گر متنی ویرایش کنیم.\n\n```sh  \nsudo gedit /etc/samba/smb.conf  \n```\n\nفایل smb.conf دارای بخش‌های مختلفی است که در ادامه به توضییح آن‌ها می‌پردازیم.\n\n*   `[global]`: در این بخش پیکربندی کلی و مورد استفاده در تمامی بخش‌ها تعریف می گردد.\n*   `[share]`: یک اشتراک را تعریف می‌کند.\n*   `[printers]`: در این بخش پرینترهای اشتراک گذاشته تعریف می‌شوند.\n*   `[homes]`: دایرکتوری home کاربران اشتراک گذاشته تعریف می‌شوند.\n\nدر داخل هرکدام از این بخش‌ها پارامترهایی وجود دارد که هر پارامتر می‌تواند مقداری مانند true, false, yes, no و یا یک رشته یا مسیر داشته باشد.\n\nدر ادامه به توضیح برخی از این پارامتر ها می پردازیم.\n\n*   browseable: تعیین می‌کند که اشتراک مورد نظرمان می‌تواند Browse شود و یا خیر.\n*   comment: متن توضیح که در کنار اشتراک یا سرویس نمایش داده می‌شود.\n*   create mask: برای تبدیل مجوزهای ویندوز به یونیکس/لینوکس در هنگام ایجاد فایل به‌کار می‌رود. مقدار پیشفرض برابر 0744 است.\n*   directory mask: برای تبدیل مجوزهای ویندوز به یونیکس/لینوکس در هنگام ایجاد دایرکتوری به‌کار می‌رود. مقدار پیش‌فرض برابر 755 است.\n*   encrypt passwords: تعیین می‌کند که در هنگام Authentication بین سرویس دهنده و سرویس گیرنده کلمات عبور رمزنگاری شوند یا خیر.\n*   security: این گزینه مشخص می‌کند که کاربران چگونه به سرویس دهنده متصل شده و احراز هویت شوند. مقدار پیش‌فرض برابر user است.\n*   read only: امکان ویرایش فایل‌ها توسط کاربران را مشخص می‌کند.\n*   invalid users: این کاربران تعریف شده قادر نخواهند بود به سیستم وارد شوند.\n*   workgroup: تعیین کننده نام شبکه Workgroup است.\n*   server string: نام سرویس دهنده را در سیستم‌های سرویس گیرنده مشخص می‌کند.\n*   interfaces: آدرس‌هایی را که مجاز به برقراری ارتباط با سرویس دهنده هستند را مشخص می‌کند.\n*   printable: امکان ارسال چاپ توسط کاربر به سرویس دهنده را مشخص می‌کند.\n*   و …\n\nقبل از اشتراک گذاری می‌بایست کاربرانمان را در سرویس دهنده تعریف نماییم. که به‌صورت زیر عمل می‌کنیم.\n\n```sh  \nsudo smbpasswd -L -a USER NAME  \n```\n\nکه در اینجا `USER NAME` نام کاربر مورد نظر شماست.\n\nبرای اشتراک‌گذاری یک دایرکتوری به‌صورت زیر عمل می کنیم.\n\n```  \n[My Share]  \n path = /home/reza/my_share  \n browseable = yes  \n read only = yes  \n```\n\nدر مثال فوق یک دایرکتوری با نام My Share و در مسیر `home/reza/my_share/` و با دسترسی فقط خواندنی تعریف نمودیم.\n\nسپس سرویس دهنده را با دستور زیر مجدداً راه اندازی می‌کنیم.\n\n```sh  \nsystemctl restart samba-ad-dc.service  \n```\n\nجهت بررسی وضعیت سرویس دهنده و منابع اشتراک گذاشته شده می‌توانیم از دستور زیر استفاده کنیم.\n\n```sh  \nsmbclient -L SERVER  \n```\n\nکه در اینجا `SERVER` می‌تواند نام و یا آدرس آی‌پی سرویس دهنده باشد.\n\n* نکته)‌ جهت استفاده از ابزار smbclient می‌بایست ابتدا آن را توسط دستور زیر روی سرویس‌گیرندهای لینوکسی نصب نمود.\n\n```sh  \nsudo apt install smbclient  \n```\n\nجهت ماونت نمودن یک اشتراک می‌توانیم بصورت زیر عمل کنیم.\n\n```sh  \nmount –t cifs //SERVER IP/SHARE /mnt –o username=USER NAME,workgroup=WORKGROUP NAME  \n```\n\nکه در اینجا `SERVER IP/SHARE//` آدرس اشتراک ما و `mnt/` آدرس مسیری است که می‌بایست در آنجا ماونت شود و `USER NAME` نام کاربری و `WORKGROUP NAME` هم نام گروه کاری شما را مشخص می‌کند.\n\n*‌نکته)‌ جهت ماونت کردن فایل‌سیستم‌های Samba نیاز به ابزار `cifs-utils` داریم که می‌بایست روی سرویس‌گیرنده‌های لینوکسی نصب کنیم که برای برای نصب `cifs-utils` دستور زیر را وارد می‌کنیم.\n\n```sh  \nsudo apt install cifs-utils  \n```\n"}},"__N_SSG":true}