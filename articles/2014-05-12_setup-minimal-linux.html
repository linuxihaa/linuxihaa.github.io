<!DOCTYPE html><html lang="fa"><head><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" href="/icon-512x512.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link href="//db.onlinewebfonts.com/c/14b4bf4df4455e6a1277f2b2584dadd6?family=BBCNassim" rel="stylesheet" type="text/css"/><meta name="msapplication-TileColor" content="#ce1919"/><meta name="theme-color" content="#ce1919"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@handle"/><meta property="og:type" content="website"/><meta property="og:locale" content="fa_IR"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>برپاسازی لینوکس پایه</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="آموزش برپاسازی لینوکس پایه و ساخت توزیع لینوکس شخصی"/><meta property="og:url" content="/articles/[slug]"/><meta property="og:title" content="برپاسازی لینوکس پایه"/><meta property="og:description" content="آموزش برپاسازی لینوکس پایه و ساخت توزیع لینوکس شخصی"/><meta property="og:image" content="https://linuxiha.com/images/gnu-linux.jpg"/><meta property="og:image:alt" content="برپاسازی لینوکس پایه"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="600"/><meta property="og:site_name" content="Linuxiha"/><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://linuxiha.com/articles/2014-05-12_setup-minimal-linux"
    },
    "headline": "برپاسازی لینوکس پایه",
    "image": [
      "https://linuxiha.com/images/gnu-linux.jpg"
     ],
    "datePublished": "Mon May 12 2014 00:00:00 GMT+0000",
    "dateModified": "Mon May 12 2014 00:00:00 GMT+0000",
    "author": {"@type": "Person","name": "میثم ساکی"},
    "publisher": {
      "@type": "Organization",
      "name": "Linuxiha",
      "logo": {
        "@type": "ImageObject",
        "url": "https://linuxiha.com/images/logo.png"
      }
    },
    "description": "آموزش برپاسازی لینوکس پایه و ساخت توزیع لینوکس شخصی"
  }</script><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://linuxiha.com",
          "name": "لینوکسی ها"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "/learning",
          "name": "آموزشی"
        }
      },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://linuxiha.com/articles/2014-05-12_setup-minimal-linux",
          "name": "برپاسازی لینوکس پایه"
        }
      }
     ]
  }</script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/be235685d546691402be.css" as="style"/><link rel="stylesheet" href="/_next/static/css/be235685d546691402be.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d4b1ad855d90d489a111.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d4b1ad855d90d489a111.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" as="script"/><link rel="preload" href="/_next/static/chunks/dccdaae97238514e0e59f68ff40a3150f2d60869.fd7c33e9ae3c66b740c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-3c19994afb449613f52a.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18007ee4e366b206423f37b43f40d4861448257.6ad75590f65d0a64ea61.js" as="script"/><link rel="preload" href="/_next/static/chunks/9f32a1895f4aacf1ea63ff9f71a540b7eb71f721.c3d97f18e04e41235ad9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-5e768503c47f0f474cf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/884c0b09aaba7d8da8976f96bae68463b81d3e33.69e17f26dc467dcd1735.js" as="script"/><link rel="preload" href="/_next/static/chunks/755b54d753eea6c310ec0b9a05508d467366a08f.dd8ff6ba50741b700375.js" as="script"/><link rel="preload" href="/_next/static/chunks/6b20a07b2d70cfcb2a9bc7e0210d4109f26bcd0c.6ef66b02a65441044c74.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bslug%5D-8dd97a7322e8b3511971.js" as="script"/></head><body dir="rtl" lang="fa"><div id="__next"><header class="header_container__2boq4"><h2></h2><nav class="header_navbar__3Tbm7"><a href="/">خانه</a><a href="/news">خبری</a><a href="/learning">آموزشی</a><a href="/about">درباره ما</a></nav><figure class="header_logo__ZHkcG"><img src="/images/logo.png" alt="linuxiha-logo"/></figure></header><div class="MuiPaper-root article_article__15ETi MuiPaper-elevation1 MuiPaper-rounded"><img src="/images/gnu-linux.jpg" alt="برپاسازی لینوکس پایه"/><h1>برپاسازی لینوکس پایه</h1><div class="MuiCardHeader-root"><div class="MuiCardHeader-avatar"><div class="MuiAvatar-root MuiAvatar-circle article_avatar__2QXuX" aria-label="article"><img alt="میثم ساکی" src="authors/user.png" class="MuiAvatar-img"/></div></div><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-body2 MuiTypography-displayBlock">میثم ساکی</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body2 MuiTypography-colorTextSecondary MuiTypography-displayBlock">۷ سال قبل - زمان خواندن ۵ دقیقه</span></div></div><section class="article_content__1mHP3"><p>افرادی هستند که نیاز به برپاسازی یک لینوکس پایه دارند. از جمله نیاز افراد برای این کار می‌توان به استفاده از ابزارهای پایه لینوکس در سیستمی خلوت و کم حجم و یا حتی تولید توزیع جدید اشاره کرد.</p>
<p>افرادی که می‌خواهند توزیع جدیدی از لینوکس ساخته و منتشر کنند اول باید بدانند کرنل لینوکس به تنهایی یک سیستم‌عامل نیست بلکه یک هسته است که با ابزارهایی که روی همان هسته اجرا می‌شوند، به‌عنوان یک سیستم‌عامل کامل قابل استفاده می‌شود. خواه استفاده از ابزارهای گنو و تولید سیستم‌عامل‌های مرسوم گنو/لینوکس و یا روش‌های دیگری مانند اندروید که هسته لینوکس را با ابزارهای ویژه خود به یک سیستم‌عامل کامل تبدیل کرده است.</p>
<p>اگر شما می‌خواهید یک سیستم‌عامل با هسته لینوکس ایجاد کنید برای روش آخر من پیشنهادی ندارم و می‌گویم که کارتان بسیار سخت است چون باید خیلی از ابزارهای اولیه را از نو برنامه‌نویسی کنید اما اگر می‌خواهید یک توزیع جدید گنو/لینوکس ایجاد کنید دو روش پیش رو دارید. یا از توزیع‌های جدید انشعاب بگیرید (که برای هر توزیع ابزارها و روش‌های مشخصی وجود دارد و راحت‌ترین آن‌ها هم انشعاب از ابونتو دسکتاب است) و یا از پایه توزیع گنو/لینوکس خودتان را بسازید!</p>
<p>بهترین منبع برای تولید سامانه گنو/لینوکس از پایه، کتاب <code></code> است که از آدرس <code></code> قابل دسترس است.</p>
<p>اما روش بالا مشکلات زیادی دارد. از جمله وقت زیادی که از شما می‌گیرد و دوم اینکه پشتیبانی و بروزرسانی ابزارهای آن طاقت‌فرسا است و بهتر بگویم کار یک گروه خبره است که می‌خواهند واقعا نیازهای جدیدی را در حیطه توزیع‌های پایه پوشش بدهند.</p>
<p>اما روشی که من پیشنهاد می‌کنم استفاده از هسته ابونتو (Ubuntu Core) است! هسته ابونتو در عین اینکه سامانه گنو/لینوکس پایه در اختیار شما می‌گذارد از مزیت‌هایی مانند داشتن مدیر بسته دی‌پی‌کی‌جی و بروزرسانی‌های دائمی ابونتو بهره‌مند است؛ بروزرسانی‌هایی که کارایی و امنیت توزیع شما را تضمین می‌کنند. در عین حال شما می‌توانید خط مشی توزیع خود را کاملا از ابونتو جدا کنید. در ادامه روش برپاسازی این سامانه را مطالعه خواهید کرد.</p>
<h3>برپاسازی هسته ابونتو</h3>
<p>ابتدا از آدرس <code></code> هسته مناسب را دریافت کنید (هسته ابونتو برای ماشین‌های x86 در دو نوع ۳۲ بیت و 64 بیت و arm موجود است).</p>
<p>سپس ترمینالی باز کرده و با کاربر روت وارد شوید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>sudo su</span></code></pre></pre>
<p>اکنون پارتیشن روت سامانه جدید لینوکس را بسازید. برای این مرحله می‌توانید از هر ابزار گرافیکی (gprated) یا خط فرمانی (cfdisk) پارتیشن‌بندی استفاده کنید. پارتیشن روت را به اندازه کافی (بسته به نیازتان در آینده) بگیرید و اگر روی سیستم شما سیستم‌عامل دیگری نیست برچسب بوت آن را فعال کنید.</p>
<p>با دستور زیر پارتیشن روت خود را فرمت کنید. (sda1 یک مثال از شناسه است و بسته به مرحله قبل متفاوت است).</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>mkfs.ext4 /dev/sda1</span></code></pre></pre>
<p>پارتیشن روت را در سامانه فعلی مانت کنید تا بتوان از آن استفاده کرد.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>mkdir /mnt/tmp
</span>mount /dev/sda1 /mnt/tmp
</code></pre></pre>
<p>آرشیو هسته ابونتو را در پارتیشن روت استخراج کنید (مسیر آرشیو را به‌جای &lt;archive.tar.gz&gt; وارد کنید).</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>tar -zxvf &lt;archive.tar.gz&gt; -C /mnt/tmp</span></code></pre></pre>
<p>وارد مسیر پارتیشن روت شوید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cd /mnt/tmp</span></code></pre></pre>
<p>گراب را روی دیسک نصب کنید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>grub-install --root-directory=/mnt/tmp /dev/sda</span></code></pre></pre>
<p>تنظیمات شبکه سامانه فعلی را در سامانه جدید کپی کنید تا بعد از ورود به قلمرو آن (chroot) بتوانید از شبکه سامانه فعلی استفاده کنید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cp /etc/resolv.conf /mnt/tmp/etc/resolv.conf</span></code></pre></pre>
<p>وارد قلمرو سامانه گنو/لینوکس جدید شوید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>for f in /sys /proc /dev ; do mount --rbind $f /mnt/tmp/$f ; done ; chroot /mnt/tmp</span></code></pre></pre>
<p>هسته لینوکس را در سامانه جدید نصب کنید (دستور زیر برای زمانی است که سامانه میزبان نیز ابونتو یا دبیان باشد. برای دیگر میزبان‌ها باید هسته مناسب نصب شود و یا اینکه هسته را نیز دریافت کرده و در سامانه جدید کمپایل کنید).</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>apt-get update &amp; apt-get install linux-{headers,image}-generic</span></code></pre></pre>
<p>گراب را آپدیت کنید تا سیستم‌عامل جدید و قبلی‌ها را به لیست منوی خود اضافه کند.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>update-grub</span></code></pre></pre>
<p>پسورد روت سامانه جدید را ست کنید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>passwd</span></code></pre></pre>
<p>منابع را آزاد کنید و خارج شوید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>exit
</span>cd ..
<!-- -->umount -v /mnt/tmp/proc
<!-- -->umount -v /mnt/tmp/sys
<!-- -->umount -v /mnt/tmp/dev
<!-- -->umount -v /mnt/tmp/
<!-- -->exit
</code></pre></pre>
<p>تمام شد! اکنون کافی است تا سیستم را ریبوت کنید و از سامانه جدید گنو/لینوکس خود که با هسته ابونتو ساخته‌اید استفاده کنید.</p>
<p>در صورتی که رم کافی ندارید و نیاز به پارتیشن سواپ دارید می‌توانید بعد از ساخت پارتیشن سواپ به اندازه مناسب از دستورات زیر برای فعال‌سازی آن استفاده کنید.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>mkswap /dev/sdaX
</span>swapon /dev/sdaX
</code></pre></pre>
<p>برای اتصال به شبکه اینترنت هم اگر به کابل متصل هستید کافیست دستور زیر را بزنید (eth0 شناسه اولین کارت شبکه شما است و اگر چند کارت شبکه دارید شناسه هر کدام که نیاز است را وارد کنید).</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>dhclient eth0</span></code></pre></pre>
<p>برای اتصال به شبکه بی‌سیم هم می‌توانید از دستورات زیر استفاده کنید (در دستور زیر نام و پسورد مناسب را جایگزین کنید).</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>iwconfig wlan0 essid name key password
</span>dhclient wlan0
</code></pre></pre>
<p>شما می‌توانید سامانه جدید را بسته به نیازتان سفارش‌سازی کنید، بسته‌های مورد نیاز را تغییر دهید و یا حتی نام توزیع را تغییر و به عنوان یک توزیع جدید منتشر کنید.</p></section><div class="progress_root__2VpcX"><div class="MuiLinearProgress-root MuiLinearProgress-colorPrimary MuiLinearProgress-determinate" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><div class="MuiLinearProgress-bar MuiLinearProgress-barColorPrimary MuiLinearProgress-bar1Determinate" style="transform:translateX(100%)"></div></div></div></div><nav id="navbar" class="menu_menu-container__3W1os"><a class="menu_menu-item__2FGZV" href="/"><img src="/icons/home.png" alt="home"/> <span>خانه</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/news"><img src="/icons/news.png" alt="news"/> <span>خبری</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/learning"><img src="/icons/article.png" alt="article"/> <span>آموزشی</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/about"><img src="/icons/info.png" alt="info"/> <span>درباره ما</span> <aside></aside></a></nav></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"slug":"2014-05-12_setup-minimal-linux","layout":"post","jdate":"Mon May 12 2014 00:00:00 GMT+0000","user":"misam","title":"برپاسازی لینوکس پایه","categories":["آموزشی"],"tags":["پیکربندی","توسعه"],"featured":"gnu-linux.jpg","keywords":["برپاسازی لینوکس پایه","ساخت توزیع لینوکس"],"description":"آموزش برپاسازی لینوکس پایه و ساخت توزیع لینوکس شخصی","timeToRead":5,"content":"\nافرادی هستند که نیاز به برپاسازی یک لینوکس پایه دارند. از جمله نیاز افراد برای این کار می‌توان به استفاده از ابزارهای پایه لینوکس در سیستمی خلوت و کم حجم و یا حتی تولید توزیع جدید اشاره کرد.\n\nافرادی که می‌خواهند توزیع جدیدی از لینوکس ساخته و منتشر کنند اول باید بدانند کرنل لینوکس به تنهایی یک سیستم‌عامل نیست بلکه یک هسته است که با ابزارهایی که روی همان هسته اجرا می‌شوند، به‌عنوان یک سیستم‌عامل کامل قابل استفاده می‌شود. خواه استفاده از ابزارهای گنو و تولید سیستم‌عامل‌های مرسوم گنو/لینوکس و یا روش‌های دیگری مانند اندروید که هسته لینوکس را با ابزارهای ویژه خود به یک سیستم‌عامل کامل تبدیل کرده است.\n\nاگر شما می‌خواهید یک سیستم‌عامل با هسته لینوکس ایجاد کنید برای روش آخر من پیشنهادی ندارم و می‌گویم که کارتان بسیار سخت است چون باید خیلی از ابزارهای اولیه را از نو برنامه‌نویسی کنید اما اگر می‌خواهید یک توزیع جدید گنو/لینوکس ایجاد کنید دو روش پیش رو دارید. یا از توزیع‌های جدید انشعاب بگیرید (که برای هر توزیع ابزارها و روش‌های مشخصی وجود دارد و راحت‌ترین آن‌ها هم انشعاب از ابونتو دسکتاب است) و یا از پایه توزیع گنو/لینوکس خودتان را بسازید!\n\nبهترین منبع برای تولید سامانه گنو/لینوکس از پایه، کتاب `LFS (Linux From Scratch)` است که از آدرس `linuxfromscratch.org` قابل دسترس است.\n\nاما روش بالا مشکلات زیادی دارد. از جمله وقت زیادی که از شما می‌گیرد و دوم اینکه پشتیبانی و بروزرسانی ابزارهای آن طاقت‌فرسا است و بهتر بگویم کار یک گروه خبره است که می‌خواهند واقعا نیازهای جدیدی را در حیطه توزیع‌های پایه پوشش بدهند.\n\nاما روشی که من پیشنهاد می‌کنم استفاده از هسته ابونتو (Ubuntu Core) است! هسته ابونتو در عین اینکه سامانه گنو/لینوکس پایه در اختیار شما می‌گذارد از مزیت‌هایی مانند داشتن مدیر بسته دی‌پی‌کی‌جی و بروزرسانی‌های دائمی ابونتو بهره‌مند است؛ بروزرسانی‌هایی که کارایی و امنیت توزیع شما را تضمین می‌کنند. در عین حال شما می‌توانید خط مشی توزیع خود را کاملا از ابونتو جدا کنید. در ادامه روش برپاسازی این سامانه را مطالعه خواهید کرد.\n\n### برپاسازی هسته ابونتو\n\nابتدا از آدرس `cdimage.ubuntu.com/ubuntu-core/releases/14.04/release` هسته مناسب را دریافت کنید (هسته ابونتو برای ماشین‌های x86 در دو نوع ۳۲ بیت و 64 بیت و arm موجود است).\n\nسپس ترمینالی باز کرده و با کاربر روت وارد شوید.\n\n```sh\nsudo su\n```\n\nاکنون پارتیشن روت سامانه جدید لینوکس را بسازید. برای این مرحله می‌توانید از هر ابزار گرافیکی (gprated) یا خط فرمانی (cfdisk) پارتیشن‌بندی استفاده کنید. پارتیشن روت را به اندازه کافی (بسته به نیازتان در آینده) بگیرید و اگر روی سیستم شما سیستم‌عامل دیگری نیست برچسب بوت آن را فعال کنید.\n\nبا دستور زیر پارتیشن روت خود را فرمت کنید. (sda1 یک مثال از شناسه است و بسته به مرحله قبل متفاوت است).\n\n```sh\nmkfs.ext4 /dev/sda1\n```\n\nپارتیشن روت را در سامانه فعلی مانت کنید تا بتوان از آن استفاده کرد.\n\n```sh\nmkdir /mnt/tmp\nmount /dev/sda1 /mnt/tmp\n```\n\nآرشیو هسته ابونتو را در پارتیشن روت استخراج کنید (مسیر آرشیو را به‌جای \u003carchive.tar.gz\u003e وارد کنید).\n\n```sh\ntar -zxvf \u003carchive.tar.gz\u003e -C /mnt/tmp\n```\n\nوارد مسیر پارتیشن روت شوید.\n\n```sh\ncd /mnt/tmp\n```\n\nگراب را روی دیسک نصب کنید.\n\n```sh\ngrub-install --root-directory=/mnt/tmp /dev/sda\n```\n\nتنظیمات شبکه سامانه فعلی را در سامانه جدید کپی کنید تا بعد از ورود به قلمرو آن (chroot) بتوانید از شبکه سامانه فعلی استفاده کنید.\n\n```sh\ncp /etc/resolv.conf /mnt/tmp/etc/resolv.conf\n```\n\nوارد قلمرو سامانه گنو/لینوکس جدید شوید.\n\n```sh\nfor f in /sys /proc /dev ; do mount --rbind $f /mnt/tmp/$f ; done ; chroot /mnt/tmp\n```\n\nهسته لینوکس را در سامانه جدید نصب کنید (دستور زیر برای زمانی است که سامانه میزبان نیز ابونتو یا دبیان باشد. برای دیگر میزبان‌ها باید هسته مناسب نصب شود و یا اینکه هسته را نیز دریافت کرده و در سامانه جدید کمپایل کنید).\n\n```sh\napt-get update \u0026 apt-get install linux-{headers,image}-generic\n```\n\nگراب را آپدیت کنید تا سیستم‌عامل جدید و قبلی‌ها را به لیست منوی خود اضافه کند.\n\n```sh\nupdate-grub\n```\n\nپسورد روت سامانه جدید را ست کنید.\n\n```sh\npasswd\n```\n\nمنابع را آزاد کنید و خارج شوید.\n\n```sh\nexit\ncd ..\numount -v /mnt/tmp/proc\numount -v /mnt/tmp/sys\numount -v /mnt/tmp/dev\numount -v /mnt/tmp/\nexit\n```\n\nتمام شد! اکنون کافی است تا سیستم را ریبوت کنید و از سامانه جدید گنو/لینوکس خود که با هسته ابونتو ساخته‌اید استفاده کنید.\n\nدر صورتی که رم کافی ندارید و نیاز به پارتیشن سواپ دارید می‌توانید بعد از ساخت پارتیشن سواپ به اندازه مناسب از دستورات زیر برای فعال‌سازی آن استفاده کنید.\n\n```sh\nmkswap /dev/sdaX\nswapon /dev/sdaX\n```\n\nبرای اتصال به شبکه اینترنت هم اگر به کابل متصل هستید کافیست دستور زیر را بزنید (eth0 شناسه اولین کارت شبکه شما است و اگر چند کارت شبکه دارید شناسه هر کدام که نیاز است را وارد کنید).\n\n```sh\ndhclient eth0\n```\n\nبرای اتصال به شبکه بی‌سیم هم می‌توانید از دستورات زیر استفاده کنید (در دستور زیر نام و پسورد مناسب را جایگزین کنید).\n\n```sh\niwconfig wlan0 essid name key password\ndhclient wlan0\n```\n\nشما می‌توانید سامانه جدید را بسته به نیازتان سفارش‌سازی کنید، بسته‌های مورد نیاز را تغییر دهید و یا حتی نام توزیع را تغییر و به عنوان یک توزیع جدید منتشر کنید."}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"2014-05-12_setup-minimal-linux"},"buildId":"igqXl2OPJ05s2tPs4MQMK","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e893e522365b6e0e5fa4.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" async=""></script><script src="/_next/static/chunks/dccdaae97238514e0e59f68ff40a3150f2d60869.fd7c33e9ae3c66b740c3.js" async=""></script><script src="/_next/static/chunks/main-3c19994afb449613f52a.js" async=""></script><script src="/_next/static/chunks/c18007ee4e366b206423f37b43f40d4861448257.6ad75590f65d0a64ea61.js" async=""></script><script src="/_next/static/chunks/9f32a1895f4aacf1ea63ff9f71a540b7eb71f721.c3d97f18e04e41235ad9.js" async=""></script><script src="/_next/static/chunks/pages/_app-5e768503c47f0f474cf1.js" async=""></script><script src="/_next/static/chunks/884c0b09aaba7d8da8976f96bae68463b81d3e33.69e17f26dc467dcd1735.js" async=""></script><script src="/_next/static/chunks/755b54d753eea6c310ec0b9a05508d467366a08f.dd8ff6ba50741b700375.js" async=""></script><script src="/_next/static/chunks/6b20a07b2d70cfcb2a9bc7e0210d4109f26bcd0c.6ef66b02a65441044c74.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bslug%5D-8dd97a7322e8b3511971.js" async=""></script><script src="/_next/static/igqXl2OPJ05s2tPs4MQMK/_buildManifest.js" async=""></script><script src="/_next/static/igqXl2OPJ05s2tPs4MQMK/_ssgManifest.js" async=""></script></body></html>