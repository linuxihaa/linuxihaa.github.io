<!DOCTYPE html><html lang="fa"><head><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" href="/icon-512x512.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link href="//db.onlinewebfonts.com/c/14b4bf4df4455e6a1277f2b2584dadd6?family=BBCNassim" rel="stylesheet" type="text/css"/><meta name="msapplication-TileColor" content="#ce1919"/><meta name="theme-color" content="#ce1919"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@handle"/><meta property="og:type" content="website"/><meta property="og:locale" content="fa_IR"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ریموت دسکتاپ در لینوکس با xrdp</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="آموزش ریموت دسکتاپ در لینوکس با xrdp"/><meta property="og:url" content="/articles/[slug]"/><meta property="og:title" content="ریموت دسکتاپ در لینوکس با xrdp"/><meta property="og:description" content="آموزش ریموت دسکتاپ در لینوکس با xrdp"/><meta property="og:image" content="https://linuxiha.com/images/xrdp-linux-desktop-remote-rdp.png"/><meta property="og:image:alt" content="ریموت دسکتاپ در لینوکس با xrdp"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="600"/><meta property="og:site_name" content="Linuxiha"/><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://linuxiha.com/articles/2019-01-13-xrdp"
    },
    "headline": "ریموت دسکتاپ در لینوکس با xrdp",
    "image": [
      "https://linuxiha.com/images/xrdp-linux-desktop-remote-rdp.png"
     ],
    "datePublished": "Sun Jan 13 2019 00:00:00 GMT+0000",
    "dateModified": "Sun Jan 13 2019 00:00:00 GMT+0000",
    "author": {"@type": "Person","name": "رضا معصوم‌وند"},
    "publisher": {
      "@type": "Organization",
      "name": "Linuxiha",
      "logo": {
        "@type": "ImageObject",
        "url": "https://linuxiha.com/images/logo.png"
      }
    },
    "description": "آموزش ریموت دسکتاپ در لینوکس با xrdp"
  }</script><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://linuxiha.com",
          "name": "لینوکسی ها"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "/learning",
          "name": "آموزشی"
        }
      },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://linuxiha.com/articles/2019-01-13-xrdp",
          "name": "ریموت دسکتاپ در لینوکس با xrdp"
        }
      }
     ]
  }</script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/be235685d546691402be.css" as="style"/><link rel="stylesheet" href="/_next/static/css/be235685d546691402be.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d4b1ad855d90d489a111.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d4b1ad855d90d489a111.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" as="script"/><link rel="preload" href="/_next/static/chunks/dccdaae97238514e0e59f68ff40a3150f2d60869.fd7c33e9ae3c66b740c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-3c19994afb449613f52a.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18007ee4e366b206423f37b43f40d4861448257.6ad75590f65d0a64ea61.js" as="script"/><link rel="preload" href="/_next/static/chunks/9f32a1895f4aacf1ea63ff9f71a540b7eb71f721.c3d97f18e04e41235ad9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-5e768503c47f0f474cf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/884c0b09aaba7d8da8976f96bae68463b81d3e33.69e17f26dc467dcd1735.js" as="script"/><link rel="preload" href="/_next/static/chunks/755b54d753eea6c310ec0b9a05508d467366a08f.dd8ff6ba50741b700375.js" as="script"/><link rel="preload" href="/_next/static/chunks/6b20a07b2d70cfcb2a9bc7e0210d4109f26bcd0c.6ef66b02a65441044c74.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bslug%5D-8dd97a7322e8b3511971.js" as="script"/></head><body dir="rtl" lang="fa"><div id="__next"><header class="header_container__2boq4"><h2></h2><nav class="header_navbar__3Tbm7"><a href="/">خانه</a><a href="/news">خبری</a><a href="/learning">آموزشی</a><a href="/about">درباره ما</a></nav><figure class="header_logo__ZHkcG"><img src="/images/logo.png" alt="linuxiha-logo"/></figure></header><div class="MuiPaper-root article_article__15ETi MuiPaper-elevation1 MuiPaper-rounded"><img src="/images/xrdp-linux-desktop-remote-rdp.png" alt="ریموت دسکتاپ در لینوکس با xrdp"/><h1>ریموت دسکتاپ در لینوکس با xrdp</h1><div class="MuiCardHeader-root"><div class="MuiCardHeader-avatar"><div class="MuiAvatar-root MuiAvatar-circle article_avatar__2QXuX" aria-label="article"><img alt="رضا معصوم‌وند" src="authors/user.png" class="MuiAvatar-img"/></div></div><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-body2 MuiTypography-displayBlock">رضا معصوم‌وند</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body2 MuiTypography-colorTextSecondary MuiTypography-displayBlock">۲ سال قبل - زمان خواندن ۵ دقیقه</span></div></div><section class="article_content__1mHP3"><p>اگر با سیستم‌های ویندوزی کار کرده باشید حتما می‌دانید که تمامی نسخه‌های ویندوز قابلیت اختصاصی به نام Remote Desktop یاRDP دارند که بوسیله این قابلیت می‌توانید به‌صورت ریموت به صفحه دسکتاپ خود دسترسی داشته باشید.
اما در سیستم‌های شبهه یونیکس به‌دلیل این‌که اغلب تنظیمات به‌صورت متنی انجام می‌شود، معمولا کاربران توسظ SSH می‌توانند به سیستم راه دور خود متصل شوند و کار خود را انجام دهند.
حتما تا به حال برای شما پیش امده است که بخواهید در محیط شبکه از سیستم ویندوزی خود به صفحه دسکتاپ لینوکس خود به‌صورت ریموت دسترسی داشته باشید. اما همانطور که می دانید برخلاف ویندوز در سیستم عامل لینوکس به‌صورت پیش‌فرض از RDP پشتیبانی نمی‌شود ولی خوشبختانه توسط ابزاری به نام Xrdp این امکان در لینوکس نیز میسر می‌شود که در این مقاله به نصب و پیکربندی ان خواهیم پرداخت</p>
<p>پروژه Xrdp یک ابزار متن‌باز است که این امکان را به کاربران می‌دهد که بتوانند به دسکتاپ لینوکس خود از داخل سیستم عامل ویندوز دسترسی داشته باشند. این ابزار علاوه بر پشتیبانی از RDP Client های ویندوزی از سایرکلاینت‌های مشابه همچون FreeRDP, rdesktop, NeutrinoRDP نیز پشتیبانی می‌کند. همچنین در نسخه جدید این برنامه برای امنیت بیشتر از TLS نیز پشتیبانی می‌گردد.</p>
<p>برای نصب در سیستم‌های مبتنی بر Debian دستور زیر را وارد می‌کنیم:</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>apt install xrdp</span></code></pre></pre>
<p>برای نصب در سیستم‌های مبتنی بر Redhat دستورات زیر را وارد می‌کنیم:</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
</span>yum update &amp;&amp; yum -y install xrdp tigervnc-server
</code></pre></pre>
<p>سپس فایل زیر را ویرایش می‌کنیم</p>
<pre><code></code></pre>
<p>و مانند زیر آن را تغییر می‌دهیم</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-shell" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>polkit.addRule</span><span class="token" style="color:#f8f8f2">(</span><span>function</span><span class="token" style="color:#f8f8f2">(</span><span>action, subject</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>   </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">((</span><span class="token" style="color:#f8f8f2">action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager.create</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">device” </span><span class="token" style="color:#f8f8f2">||</span><span class="token" style="color:#f8f8f2"> action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager.create</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">profile” </span><span class="token" style="color:#f8f8f2">||</span><span class="token" style="color:#f8f8f2"> action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.  freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager.delete</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">device” </span><span class="token" style="color:#f8f8f2">||</span><span class="token" style="color:#f8f8f2"> action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager.delete</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">profile” </span><span class="token" style="color:#f8f8f2">||</span><span class="token" style="color:#f8f8f2"> action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager. modify</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">device” </span><span class="token" style="color:#f8f8f2">||</span><span class="token" style="color:#f8f8f2"> action.id </span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#f8f8f2"> “org.freedesktop.color</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">manager.modify</span><span class="token" style="color:#f8f8f2">-</span><span class="token" style="color:#f8f8f2">profile”</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2"> </span><span class="token" style="color:#f8f8f2">&amp;&amp;</span><span class="token" style="color:#f8f8f2"> subject.isInGroup</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">“{group}”</span><span class="token" style="color:#f8f8f2">))</span><span>
</span><span>   </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>      </span><span class="token" style="color:#f1fa8c">return</span><span> polkit.Result.YES</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>   </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></pre></pre>
<p>و سپس سرویس xrdp را توسط دستور زیر restart می‌کنیم</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>systemctl restart xrdp</span></code></pre></pre>
<p>برای بررسی وضعیت xrdp می‌توانیم دستور زیر را بزنیم</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>systemctl status xrdp</span></code></pre></pre>
<p>که در صورتی که سرویس xrdp بدون مشکل و در حال اجرا باشد خروجی زیر را خواهیم دید</p>
<pre><code></code></pre>
<p>اگر بخواهیم با هر بار راه‌اندازی سیستم سرویس xrdp هم به‌صورت خودکار اجرا شود، دستور زیر را وارد می‌کنیم</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>systemctl enable xrdp</span></code></pre></pre>
<p>سرویس xrdp روی پورت 3389 کار می‌کند. پس برای این‌که بتوانیم به‌صورت ریموت به سیستم دسترسی داشته باشیم لازم است در فایروال سیستمی که xrdp روی ان نصب است پورت tcp/3389 را ازاد کنیم</p>
<p>در صورتی که از ufw برای مدیریت فایروال استفاده می‌کنید، می‌توانید دستور زیر را جهت ازاد شدن پورت tcp/3389 وارد کنید</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>ufw allow 3389/tcp</span></code></pre></pre>
<p>در صورتی که از firewalld برای مدیریت فایروال استفاده می‌کنید دستور زیر را جهت ازاد شدن پورت tcp/3389 وارد کنید</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>firewall-cmd --permanent --zone=public --add-port=3389/tcp
</span>firewall-cmd --reload
</code></pre></pre>
<p>حال می‌توانید از سیستم ویندوز به دسکتاپ لینوکس خود دسترسی داشته باشید.
برای این منظور در سیستم‌عامل ویندوز ابزار Remote Desktop Connection را اجرا می‌کنیم</p>
<p><img src="/images/xrdp/01-rdp-win-tools.png" alt="IMAGE_TITLE"/></p>
<p>ادرس IP سیستم مقابل و Username را مانند شکل زیر وارد می‌کنیم</p>
<p><img src="/images/xrdp/02-rdp-win-connection.png" alt="IMAGE_TITLE"/></p>
<p>و سپس روی connect کلیک می‌نماییم</p>
<p><img src="/images/xrdp/03-rdp-win-confirm.png" alt="IMAGE_TITLE"/></p>
<p>پس از برقراری اتصال، کادر زیر نمایش داده خواهد شد که از شما نام کاربری و کلمه عبور را درخواست می‌کند. آن را وارد نموده و روی OK کلیک می‌کنیم.</p>
<p><img src="/images/xrdp/04-rdp-win-credential-login.png" alt="IMAGE_TITLE"/></p>
<p>در صورتی که نام کاربری و رمز عبورتان صحیح باشد با صفحه لاگین مواجه خواهید شد که می‌توانید رمز عبورتان را وارد کنید و وارد دسکتاپ لینوکستان شوید.</p>
<p><img src="/images/xrdp/05-rdp-win-ubuntu-connection-ok.jpg" alt="IMAGE_TITLE"/></p></section><div class="progress_root__2VpcX"><div class="MuiLinearProgress-root MuiLinearProgress-colorPrimary MuiLinearProgress-determinate" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><div class="MuiLinearProgress-bar MuiLinearProgress-barColorPrimary MuiLinearProgress-bar1Determinate" style="transform:translateX(100%)"></div></div></div></div><nav id="navbar" class="menu_menu-container__3W1os"><a class="menu_menu-item__2FGZV" href="/"><img src="/icons/home.png" alt="home"/> <span>خانه</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/news"><img src="/icons/news.png" alt="news"/> <span>خبری</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/learning"><img src="/icons/article.png" alt="article"/> <span>آموزشی</span> <aside></aside></a><a class="menu_menu-item__2FGZV" href="/about"><img src="/icons/info.png" alt="info"/> <span>درباره ما</span> <aside></aside></a></nav></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"slug":"2019-01-13-xrdp","layout":"post","jdate":"Sun Jan 13 2019 00:00:00 GMT+0000","user":"rmasoumvand","title":"ریموت دسکتاپ در لینوکس با xrdp","categories":["آموزشی"],"tags":["شبکه","سرور"],"featured":"xrdp-linux-desktop-remote-rdp.png","keywords":["ریموت دسکتاپ در لینوکس","rdp","remote desktop in linux"],"description":"آموزش ریموت دسکتاپ در لینوکس با xrdp","timeToRead":5,"content":"\nاگر با سیستم‌های ویندوزی کار کرده باشید حتما می‌دانید که تمامی نسخه‌های ویندوز قابلیت اختصاصی به نام Remote Desktop یاRDP دارند که بوسیله این قابلیت می‌توانید به‌صورت ریموت به صفحه دسکتاپ خود دسترسی داشته باشید.\nاما در سیستم‌های شبهه یونیکس به‌دلیل این‌که اغلب تنظیمات به‌صورت متنی انجام می‌شود، معمولا کاربران توسظ SSH می‌توانند به سیستم راه دور خود متصل شوند و کار خود را انجام دهند. \nحتما تا به حال برای شما پیش امده است که بخواهید در محیط شبکه از سیستم ویندوزی خود به صفحه دسکتاپ لینوکس خود به‌صورت ریموت دسترسی داشته باشید. اما همانطور که می دانید برخلاف ویندوز در سیستم عامل لینوکس به‌صورت پیش‌فرض از RDP پشتیبانی نمی‌شود ولی خوشبختانه توسط ابزاری به نام Xrdp این امکان در لینوکس نیز میسر می‌شود که در این مقاله به نصب و پیکربندی ان خواهیم پرداخت\n\nپروژه Xrdp یک ابزار متن‌باز است که این امکان را به کاربران می‌دهد که بتوانند به دسکتاپ لینوکس خود از داخل سیستم عامل ویندوز دسترسی داشته باشند. این ابزار علاوه بر پشتیبانی از RDP Client های ویندوزی از سایرکلاینت‌های مشابه همچون FreeRDP, rdesktop, NeutrinoRDP نیز پشتیبانی می‌کند. همچنین در نسخه جدید این برنامه برای امنیت بیشتر از TLS نیز پشتیبانی می‌گردد.\n\nبرای نصب در سیستم‌های مبتنی بر Debian دستور زیر را وارد می‌کنیم:\n\n```sh\napt install xrdp\n```\n\nبرای نصب در سیستم‌های مبتنی بر Redhat دستورات زیر را وارد می‌کنیم:\n\n```sh\nrpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum update \u0026\u0026 yum -y install xrdp tigervnc-server\n```\n\nسپس فایل زیر را ویرایش می‌کنیم\n\n\n```\nnano /etc/polkit-1/localauthority.conf.d/02-allow-colord.conf \n```\n\nو مانند زیر آن را تغییر می‌دهیم\n\n```shell\npolkit.addRule(function(action, subject) {\n   if ((action.id == “org.freedesktop.color-manager.create-device” || action.id == “org.freedesktop.color-manager.create-profile” || action.id == “org.  freedesktop.color-manager.delete-device” || action.id == “org.freedesktop.color-manager.delete-profile” || action.id == “org.freedesktop.color-manager. modify-device” || action.id == “org.freedesktop.color-manager.modify-profile”) \u0026\u0026 subject.isInGroup(“{group}”))\n   {\n      return polkit.Result.YES;\n   }\n});\n```\n\nو سپس سرویس xrdp را توسط دستور زیر restart می‌کنیم\n\n```sh\nsystemctl restart xrdp\n```\n\nبرای بررسی وضعیت xrdp می‌توانیم دستور زیر را بزنیم\n\n```sh\nsystemctl status xrdp\n```\n\nکه در صورتی که سرویس xrdp بدون مشکل و در حال اجرا باشد خروجی زیر را خواهیم دید\n\n```\n● xrdp.service - xrdp daemon\n   Loaded: loaded (/lib/systemd/system/xrdp.service; enabled; vendor preset: en\n   Active: active (running) since Tue 2018-10-16 02:05:21 WAT; 11min ago\n     Docs: man:xrdp(8)\n           man:xrdp.ini(5)\n Main PID: 2654 (xrdp)\n    Tasks: 1 (limit: 2290)\n   CGroup: /system.slice/xrdp.service\n           └─2654 /usr/sbin/xrdp\n```\n\nاگر بخواهیم با هر بار راه‌اندازی سیستم سرویس xrdp هم به‌صورت خودکار اجرا شود، دستور زیر را وارد می‌کنیم\n\n```sh\nsystemctl enable xrdp\n```\n\nسرویس xrdp روی پورت 3389 کار می‌کند. پس برای این‌که بتوانیم به‌صورت ریموت به سیستم دسترسی داشته باشیم لازم است در فایروال سیستمی که xrdp روی ان نصب است پورت tcp/3389 را ازاد کنیم\n\nدر صورتی که از ufw برای مدیریت فایروال استفاده می‌کنید، می‌توانید دستور زیر را جهت ازاد شدن پورت tcp/3389 وارد کنید\n\n```sh\nufw allow 3389/tcp\n```\n\nدر صورتی که از firewalld برای مدیریت فایروال استفاده می‌کنید دستور زیر را جهت ازاد شدن پورت tcp/3389 وارد کنید\n\n```sh\nfirewall-cmd --permanent --zone=public --add-port=3389/tcp\nfirewall-cmd --reload\n```\n\nحال می‌توانید از سیستم ویندوز به دسکتاپ لینوکس خود دسترسی داشته باشید.\nبرای این منظور در سیستم‌عامل ویندوز ابزار Remote Desktop Connection را اجرا می‌کنیم\n\n![IMAGE_TITLE](/images/xrdp/01-rdp-win-tools.png)\n\nادرس IP سیستم مقابل و Username را مانند شکل زیر وارد می‌کنیم\n\n![IMAGE_TITLE](/images/xrdp/02-rdp-win-connection.png)\n\nو سپس روی connect کلیک می‌نماییم\n\n![IMAGE_TITLE](/images/xrdp/03-rdp-win-confirm.png)\n\nپس از برقراری اتصال، کادر زیر نمایش داده خواهد شد که از شما نام کاربری و کلمه عبور را درخواست می‌کند. آن را وارد نموده و روی OK کلیک می‌کنیم.\n\n![IMAGE_TITLE](/images/xrdp/04-rdp-win-credential-login.png)\n\nدر صورتی که نام کاربری و رمز عبورتان صحیح باشد با صفحه لاگین مواجه خواهید شد که می‌توانید رمز عبورتان را وارد کنید و وارد دسکتاپ لینوکستان شوید.\n\n![IMAGE_TITLE](/images/xrdp/05-rdp-win-ubuntu-connection-ok.jpg)\n"}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"2019-01-13-xrdp"},"buildId":"igqXl2OPJ05s2tPs4MQMK","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e893e522365b6e0e5fa4.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" async=""></script><script src="/_next/static/chunks/dccdaae97238514e0e59f68ff40a3150f2d60869.fd7c33e9ae3c66b740c3.js" async=""></script><script src="/_next/static/chunks/main-3c19994afb449613f52a.js" async=""></script><script src="/_next/static/chunks/c18007ee4e366b206423f37b43f40d4861448257.6ad75590f65d0a64ea61.js" async=""></script><script src="/_next/static/chunks/9f32a1895f4aacf1ea63ff9f71a540b7eb71f721.c3d97f18e04e41235ad9.js" async=""></script><script src="/_next/static/chunks/pages/_app-5e768503c47f0f474cf1.js" async=""></script><script src="/_next/static/chunks/884c0b09aaba7d8da8976f96bae68463b81d3e33.69e17f26dc467dcd1735.js" async=""></script><script src="/_next/static/chunks/755b54d753eea6c310ec0b9a05508d467366a08f.dd8ff6ba50741b700375.js" async=""></script><script src="/_next/static/chunks/6b20a07b2d70cfcb2a9bc7e0210d4109f26bcd0c.6ef66b02a65441044c74.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bslug%5D-8dd97a7322e8b3511971.js" async=""></script><script src="/_next/static/igqXl2OPJ05s2tPs4MQMK/_buildManifest.js" async=""></script><script src="/_next/static/igqXl2OPJ05s2tPs4MQMK/_ssgManifest.js" async=""></script></body></html>